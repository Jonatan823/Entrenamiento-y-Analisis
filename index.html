<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SLER - Entrenamiento y Análisis</title>
    <style>
        :root {
            --accent: #0ea5e9;
            --bg-panel: #fcfcfc;
            --border-color: #000;
        }
        body { font-family: monospace; padding: 20px; background: #fff; color: #000; line-height: 1.4; }
        h3 { border-bottom: 2px solid var(--border-color); padding-bottom: 10px; letter-spacing: 1px; }
        
        .timer-display { font-size: 28px; font-weight: bold; margin: 20px 0; color: #333; }
        .controls { margin-bottom: 30px; }
        
        button { 
            padding: 15px 30px; cursor: pointer; font-family: monospace; 
            font-weight: bold; background: #000; color: #fff; border: none;
            transition: background 0.2s;
        }
        button:hover { background: var(--accent); }

        .grid-test { display: flex; gap: 30px; margin-top: 20px; }
        .column { flex: 1; }
        .comparison-label { font-weight: bold; margin-bottom: 8px; text-transform: uppercase; font-size: 12px; color: #666; }
        
        .box { 
            border: 1px solid var(--border-color); padding: 20px; 
            min-height: 240px; background: var(--bg-panel); 
            white-space: pre-wrap; font-size: 18px; font-weight: bold;
            transition: all 0.3s;
        }
        .active-box { border: 3px solid var(--accent); background: #fff; box-shadow: 10px 10px 0px rgba(14, 165, 233, 0.1); }

        #resultsArea { 
            margin-top: 40px; padding: 25px; background: #f8f9fa; 
            border: 2px dashed var(--border-color); display: none; 
        }
        .metric-highlight { color: var(--accent); font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <h3>NODO DE ENTRENAMIENTO Y ANÁLISIS: PROTOCOLO SLER</h3>
    
    <div class="timer-display">REGISTRO TEMPORAL: <span id="timer">0.000</span>s</div>

    <div class="controls">
        <button id="mainBtn" onclick="handleAction()">INICIAR CAPTURA BASE (TRADICIONAL)</button>
    </div>

    <div class="grid-test">
        <div class="column">
            <div class="comparison-label">Referencia: Lectura Lineal</div>
            <div id="boxComun" class="box">Esperando inicio de protocolo...</div>
        </div>
        <div class="column">
            <div class="comparison-label">Ejecución: Formato SLER (Evolutivo)</div>
            <div id="boxSler" class="box">Bloqueado hasta registro de base.</div>
        </div>
    </div>

    <div id="resultsArea">
        <h4>REPORTE DE MEJORÍA NEURAL</h4>
        <div id="finalStats"></div>
        <button onclick="location.reload()" style="margin-top:20px; background:#666; font-size:12px;">REINICIAR SESIÓN</button>
    </div>

<script>
    let startTime, timerInterval;
    let step = 0; 
    let times = [];

    const txtComun = "La lectura tradicional implica un salto brusco al final de cada renglón impreso.\nEste movimiento mecánico genera un vacío cognitivo llamado sacada de retorno.\nEl cerebro debe reubicar el foco visual perdiendo milisegundos en cada proceso.";

    // SEMÁNTICA SLER REFACTORIZADA
    // Aplicando guion anticipatorio e inversión de puntuación para evitar baches visuales
    const txtSler = 
`LA LECTURA TRADICIONAL IMPLICA-
-UN SALTO BRUSCO AL FINAL DE CA-
-DA RENGLÓN IMPRESO. ESTE MOVI-
,MIENTO MECÁNICO GENERA UN VA-
-CÍO COGNITIVO LLAMADO SACADA-
.DE RETORNO`;

    function handleAction() {
        const btn = document.getElementById('mainBtn');
        const timerDisp = document.getElementById('timer');

        if (step === 0) { 
            step = 1;
            document.getElementById('boxComun').innerText = txtComun;
            document.getElementById('boxComun').classList.add('active-box');
            btn.innerText = "DETENER REGISTRO BASE";
            startClock();
        } 
        else if (step === 1) { 
            stopClock();
            times.push(parseFloat(timerDisp.innerText));
            step = 2;
            btn.innerText = "INICIAR ENTRENAMIENTO SLER";
            document.getElementById('boxComun').classList.remove('active-box');
            timerDisp.innerText = "0.000";
        }
        else if (step === 2) { 
            step = 3;
            document.getElementById('boxSler').innerText = txtSler;
            document.getElementById('boxSler').classList.add('active-box');
            btn.innerText = "DETENER REGISTRO SLER";
            startClock();
        }
        else if (step === 3) { 
            stopClock();
            times.push(parseFloat(timerDisp.innerText));
            step = 4;
            showResults();
            btn.style.display = 'none';
            document.getElementById('boxSler').classList.remove('active-box');
        }
    }

    function startClock() {
        startTime = performance.now();
        timerInterval = setInterval(() => {
            document.getElementById('timer').innerText = ((performance.now() - startTime) / 1000).toFixed(3);
        }, 10);
    }

    function stopClock() {
        clearInterval(timerInterval);
    }

    function showResults() {
        const diff = (times[0] - times[1]).toFixed(3);
        const percent = ((diff / times[0]) * 100).toFixed(1);
        const area = document.getElementById('resultsArea');
        const stats = document.getElementById('finalStats');

        area.style.display = 'block';
        stats.innerHTML = `
            <p>Tiempo Lectura Tradicional: <strong>${times[0]}s</strong></p>
            <p>Tiempo Lectura SLER: <strong>${times[1]}s</strong></p>
            <hr style="border:0; border-top:1px solid #ccc; margin:15px 0;">
            <p>Diferencia de Procesamiento: <span class="metric-highlight">${diff}s</span></p>
            <p>Índice de Mejoría Neural: <span class="metric-highlight">${percent}%</span></p>
        `;
    }
</script>
</body>
</html>
